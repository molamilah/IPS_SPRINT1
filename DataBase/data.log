/*C1*/SET SCHEMA SYSTEM_LOBS
INSERT INTO BLOCKS VALUES(0,2147483647,0)
COMMIT
/*C2*/SET SCHEMA PUBLIC
DROP TABLE IF EXISTS APUNTADOS_ACTIVIDADES
DROP TABLE IF EXISTS NO_PRESENTADOS
DROP TABLE IF EXISTS ACTIVIDADES
DROP TABLE IF EXISTS PAGO
DROP TABLE IF EXISTS MENSUALIDADES
DROP TABLE IF EXISTS RESERVA
DROP TABLE IF EXISTS SALA
DROP TABLE IF EXISTS USUARIO
CREATE TABLE USUARIO(\u000a    ID_USUARIO INTEGER IDENTITY PRIMARY KEY,\u000a    DNI VARCHAR(9) NOT NULL UNIQUE,\u000a    NOMBRE VARCHAR(20) NOT NULL,\u000a    APELLIDOS VARCHAR(40) NOT NULL,\u000a    DIRECCION VARCHAR(40) NOT NULL,\u000a    EMAIL VARCHAR(40),\u000a    CIUDAD VARCHAR(20) NOT NULL,\u000a    PASSWORD VARCHAR(20) NOT NULL,\u000a    CUOTA DECIMAL(6,3) NOT NULL,\u000a    BAJA BOOLEAN NOT NULL,\u000a    FECHA_BAJA TIMESTAMP\u000a)
CREATE TABLE SALA(\u000a    ID_SALA INTEGER IDENTITY PRIMARY KEY,\u000a    DESCRIPCION VARCHAR(200) UNIQUE,\u000a    PRECIO DECIMAL(6,3) NOT NULL\u000a)
CREATE TABLE RESERVA(\u000a\u0009ID_RESERVA INTEGER IDENTITY PRIMARY KEY,\u000a\u0009HORA_INICIO TIMESTAMP NOT NULL,\u000a\u0009HORA_FIN TIMESTAMP NOT NULL,\u000a\u0009ID_USUARIO INTEGER NOT NULL,\u000a\u0009ID_SALA INTEGER NOT NULL,\u000a\u0009HORA_ENTRADA TIMESTAMP,\u000a\u0009HORA_SALIDA TIMESTAMP,\u000a\u0009ESTADO VARCHAR(15),\u000a\u0009CONSTRAINT FK_RESERVA_USUARIO FOREIGN KEY(ID_USUARIO) REFERENCES USUARIO(ID_USUARIO),\u000a\u0009CONSTRAINT FK_RESERVA_SALA FOREIGN KEY(ID_SALA) REFERENCES SALA(ID_SALA)\u000a)
CREATE TABLE PAGO (\u000a    ID_PAGO INTEGER IDENTITY PRIMARY KEY,\u000a    ID_RESERVA INTEGER NOT NULL,\u000a    PRECIO DECIMAL(6,3) NOT NULL,\u000a    CONTADO BOOLEAN NOT NULL,\u000a    PAGADO BOOLEAN NOT NULL,\u000a\u0009EN_CUOTA BOOLEAN DEFAULT FALSE,\u000a    CONSTRAINT FK_RESERVA_PAGO FOREIGN KEY (ID_RESERVA) REFERENCES RESERVA(ID_RESERVA),\u000a)
CREATE TABLE MENSUALIDADES (\u000a\u0009ID_USUARIO INTEGER,\u000a\u0009MES INTEGER,\u000a\u0009ANNO INTEGER,\u000a\u0009CUOTA DOUBLE,\u000a\u0009CONSTRAINT PK_ID_USUARIO_MES_ANNO PRIMARY KEY (ID_USUARIO, MES, ANNO),\u000a\u0009CONSTRAINT FK_ID_USUARIO FOREIGN KEY (ID_USUARIO) REFERENCES USUARIO(ID_USUARIO)\u000a)
DROP TABLE IF EXISTS APUNTADOS_ACTIVIDADES
DROP TABLE IF EXISTS NO_PRESENTADOS
DROP TABLE IF EXISTS ACTIVIDADES
DROP TABLE IF EXISTS PAGO
DROP TABLE IF EXISTS MENSUALIDADES
DROP TABLE IF EXISTS RESERVA
DROP TABLE IF EXISTS SALA
DROP TABLE IF EXISTS USUARIO
CREATE TABLE USUARIO(\u000a    ID_USUARIO INTEGER IDENTITY PRIMARY KEY,\u000a    DNI VARCHAR(9) NOT NULL UNIQUE,\u000a    NOMBRE VARCHAR(20) NOT NULL,\u000a    APELLIDOS VARCHAR(40) NOT NULL,\u000a    DIRECCION VARCHAR(40) NOT NULL,\u000a    EMAIL VARCHAR(40),\u000a    CIUDAD VARCHAR(20) NOT NULL,\u000a    PASSWORD VARCHAR(20) NOT NULL,\u000a    CUOTA DECIMAL(6,3) NOT NULL,\u000a    BAJA BOOLEAN NOT NULL,\u000a    FECHA_BAJA TIMESTAMP\u000a)
CREATE TABLE SALA(\u000a    ID_SALA INTEGER IDENTITY PRIMARY KEY,\u000a    DESCRIPCION VARCHAR(200) UNIQUE,\u000a    PRECIO DECIMAL(6,3) NOT NULL\u000a)
CREATE TABLE RESERVA(\u000a\u0009ID_RESERVA INTEGER IDENTITY PRIMARY KEY,\u000a\u0009HORA_INICIO TIMESTAMP NOT NULL,\u000a\u0009HORA_FIN TIMESTAMP NOT NULL,\u000a\u0009ID_USUARIO INTEGER NOT NULL,\u000a\u0009ID_SALA INTEGER NOT NULL,\u000a\u0009HORA_ENTRADA TIMESTAMP,\u000a\u0009HORA_SALIDA TIMESTAMP,\u000a\u0009ESTADO VARCHAR(15),\u000a\u0009CONSTRAINT FK_RESERVA_USUARIO FOREIGN KEY(ID_USUARIO) REFERENCES USUARIO(ID_USUARIO),\u000a\u0009CONSTRAINT FK_RESERVA_SALA FOREIGN KEY(ID_SALA) REFERENCES SALA(ID_SALA)\u000a)
CREATE TABLE PAGO (\u000a    ID_PAGO INTEGER IDENTITY PRIMARY KEY,\u000a    ID_RESERVA INTEGER NOT NULL,\u000a    PRECIO DECIMAL(6,3) NOT NULL,\u000a    CONTADO BOOLEAN NOT NULL,\u000a    PAGADO BOOLEAN NOT NULL,\u000a\u0009EN_CUOTA BOOLEAN DEFAULT FALSE,\u000a    CONSTRAINT FK_RESERVA_PAGO FOREIGN KEY (ID_RESERVA) REFERENCES RESERVA(ID_RESERVA),\u000a)
CREATE TABLE MENSUALIDADES (\u000a\u0009ID_USUARIO INTEGER,\u000a\u0009MES INTEGER,\u000a\u0009ANNO INTEGER,\u000a\u0009CUOTA DOUBLE,\u000a\u0009CONSTRAINT PK_ID_USUARIO_MES_ANNO PRIMARY KEY (ID_USUARIO, MES, ANNO),\u000a\u0009CONSTRAINT FK_ID_USUARIO FOREIGN KEY (ID_USUARIO) REFERENCES USUARIO(ID_USUARIO)\u000a)
DROP TABLE IF EXISTS APUNTADOS_ACTIVIDADES
DROP TABLE IF EXISTS NO_PRESENTADOS
DROP TABLE IF EXISTS ACTIVIDADES
DROP TABLE IF EXISTS PAGO
DROP TABLE IF EXISTS MENSUALIDADES
DROP TABLE IF EXISTS RESERVA
DROP TABLE IF EXISTS SALA
DROP TABLE IF EXISTS USUARIO
CREATE TABLE USUARIO(\u000a    ID_USUARIO INTEGER IDENTITY PRIMARY KEY,\u000a    DNI VARCHAR(9) NOT NULL UNIQUE,\u000a    NOMBRE VARCHAR(20) NOT NULL,\u000a    APELLIDOS VARCHAR(40) NOT NULL,\u000a    DIRECCION VARCHAR(40) NOT NULL,\u000a    EMAIL VARCHAR(40),\u000a    CIUDAD VARCHAR(20) NOT NULL,\u000a    PASSWORD VARCHAR(20) NOT NULL,\u000a    CUOTA DECIMAL(6,3) NOT NULL,\u000a    BAJA BOOLEAN NOT NULL,\u000a    FECHA_BAJA TIMESTAMP\u000a)
CREATE TABLE SALA(\u000a    ID_SALA INTEGER IDENTITY PRIMARY KEY,\u000a    DESCRIPCION VARCHAR(200) UNIQUE,\u000a    PRECIO DECIMAL(6,3) NOT NULL\u000a)
CREATE TABLE RESERVA(\u000a\u0009ID_RESERVA INTEGER IDENTITY PRIMARY KEY,\u000a\u0009HORA_INICIO TIMESTAMP NOT NULL,\u000a\u0009HORA_FIN TIMESTAMP NOT NULL,\u000a\u0009ID_USUARIO INTEGER NOT NULL,\u000a\u0009ID_SALA INTEGER NOT NULL,\u000a\u0009HORA_ENTRADA TIMESTAMP,\u000a\u0009HORA_SALIDA TIMESTAMP,\u000a\u0009ESTADO VARCHAR(15),\u000a\u0009CONSTRAINT FK_RESERVA_USUARIO FOREIGN KEY(ID_USUARIO) REFERENCES USUARIO(ID_USUARIO),\u000a\u0009CONSTRAINT FK_RESERVA_SALA FOREIGN KEY(ID_SALA) REFERENCES SALA(ID_SALA)\u000a)
CREATE TABLE PAGO (\u000a    ID_PAGO INTEGER IDENTITY PRIMARY KEY,\u000a    ID_RESERVA INTEGER NOT NULL,\u000a    PRECIO DECIMAL(6,3) NOT NULL,\u000a    CONTADO BOOLEAN NOT NULL,\u000a    PAGADO BOOLEAN NOT NULL,\u000a\u0009EN_CUOTA BOOLEAN DEFAULT FALSE,\u000a    CONSTRAINT FK_RESERVA_PAGO FOREIGN KEY (ID_RESERVA) REFERENCES RESERVA(ID_RESERVA),\u000a)
CREATE TABLE MENSUALIDADES (\u000a\u0009ID_USUARIO INTEGER,\u000a\u0009MES INTEGER,\u000a\u0009ANNO INTEGER,\u000a\u0009CUOTA DOUBLE,\u000a\u0009CONSTRAINT PK_ID_USUARIO_MES_ANNO PRIMARY KEY (ID_USUARIO, MES, ANNO),\u000a\u0009CONSTRAINT FK_ID_USUARIO FOREIGN KEY (ID_USUARIO) REFERENCES USUARIO(ID_USUARIO)\u000a)
CREATE TABLE ACTIVIDADES(\u000a\u0009ID_ACTIVIDAD INTEGER IDENTITY PRIMARY KEY,\u000a\u0009NOMBRE VARCHAR(40) NOT NULL,\u000a\u0009DESCRIPCION VARCHAR(200),\u000a\u0009ID_SALA INTEGER NOT NULL,\u000a\u0009NUMERO_PLAZAS INTEGER NOT NULL,\u000a\u0009CONSTRAINT FK_ID_SALA FOREIGN KEY (ID_SALA) REFERENCES SALA(ID_SALA)\u000a)
CREATE TABLE APUNTADOS_ACTIVIDADES(\u000a\u0009ID_USUARIO INTEGER NOT NULL,\u000a\u0009ID_ACTIVIDAD INTEGER NOT NULL,\u000a\u0009CONSTRAINT FK_APUNTADOS_ACTIVIDADES_USUARIO FOREIGN KEY(ID_USUARIO) REFERENCES USUARIO(ID_USUARIO),\u000a\u0009CONSTRAINT FK_APUNTADOS_ACTIVIDADES_ACTIVIDAD FOREIGN KEY(ID_ACTIVIDAD) REFERENCES ACTIVIDADES(ID_ACTIVIDAD)\u000a)
DROP TABLE IF EXISTS APUNTADOS_ACTIVIDADES
DROP TABLE IF EXISTS NO_PRESENTADOS
DROP TABLE IF EXISTS ACTIVIDADES
DROP TABLE IF EXISTS PAGO
DROP TABLE IF EXISTS MENSUALIDADES
DROP TABLE IF EXISTS RESERVA
DROP TABLE IF EXISTS SALA
DROP TABLE IF EXISTS USUARIO
CREATE TABLE USUARIO(\u000a    ID_USUARIO INTEGER IDENTITY PRIMARY KEY,\u000a    DNI VARCHAR(9) NOT NULL UNIQUE,\u000a    NOMBRE VARCHAR(20) NOT NULL,\u000a    APELLIDOS VARCHAR(40) NOT NULL,\u000a    DIRECCION VARCHAR(40) NOT NULL,\u000a    EMAIL VARCHAR(40),\u000a    CIUDAD VARCHAR(20) NOT NULL,\u000a    PASSWORD VARCHAR(20) NOT NULL,\u000a    CUOTA DECIMAL(6,3) NOT NULL,\u000a    BAJA BOOLEAN NOT NULL,\u000a    FECHA_BAJA TIMESTAMP\u000a)
CREATE TABLE SALA(\u000a    ID_SALA INTEGER IDENTITY PRIMARY KEY,\u000a    DESCRIPCION VARCHAR(200) UNIQUE,\u000a    PRECIO DECIMAL(6,3) NOT NULL\u000a)
CREATE TABLE RESERVA(\u000a\u0009ID_RESERVA INTEGER IDENTITY PRIMARY KEY,\u000a\u0009HORA_INICIO TIMESTAMP NOT NULL,\u000a\u0009HORA_FIN TIMESTAMP NOT NULL,\u000a\u0009ID_USUARIO INTEGER NOT NULL,\u000a\u0009ID_SALA INTEGER NOT NULL,\u000a\u0009HORA_ENTRADA TIMESTAMP,\u000a\u0009HORA_SALIDA TIMESTAMP,\u000a\u0009ESTADO VARCHAR(15),\u000a\u0009CONSTRAINT FK_RESERVA_USUARIO FOREIGN KEY(ID_USUARIO) REFERENCES USUARIO(ID_USUARIO),\u000a\u0009CONSTRAINT FK_RESERVA_SALA FOREIGN KEY(ID_SALA) REFERENCES SALA(ID_SALA)\u000a)
CREATE TABLE PAGO (\u000a    ID_PAGO INTEGER IDENTITY PRIMARY KEY,\u000a    ID_RESERVA INTEGER NOT NULL,\u000a    PRECIO DECIMAL(6,3) NOT NULL,\u000a    CONTADO BOOLEAN NOT NULL,\u000a    PAGADO BOOLEAN NOT NULL,\u000a\u0009EN_CUOTA BOOLEAN DEFAULT FALSE,\u000a    CONSTRAINT FK_RESERVA_PAGO FOREIGN KEY (ID_RESERVA) REFERENCES RESERVA(ID_RESERVA),\u000a)
CREATE TABLE MENSUALIDADES (\u000a\u0009ID_USUARIO INTEGER,\u000a\u0009MES INTEGER,\u000a\u0009ANNO INTEGER,\u000a\u0009CUOTA DOUBLE,\u000a\u0009CONSTRAINT PK_ID_USUARIO_MES_ANNO PRIMARY KEY (ID_USUARIO, MES, ANNO),\u000a\u0009CONSTRAINT FK_ID_USUARIO FOREIGN KEY (ID_USUARIO) REFERENCES USUARIO(ID_USUARIO)\u000a)
CREATE TABLE ACTIVIDADES(\u000a\u0009ID_ACTIVIDAD INTEGER IDENTITY PRIMARY KEY,\u000a\u0009NOMBRE VARCHAR(40) NOT NULL,\u000a\u0009DESCRIPCION VARCHAR(200),\u000a\u0009ID_SALA INTEGER NOT NULL,\u000a\u0009NUMERO_PLAZAS INTEGER NOT NULL,\u000a\u0009CONSTRAINT FK_ID_SALA FOREIGN KEY (ID_SALA) REFERENCES SALA(ID_SALA)\u000a)
CREATE TABLE APUNTADOS_ACTIVIDADES(\u000a\u0009ID_USUARIO INTEGER NOT NULL,\u000a\u0009ID_ACTIVIDAD INTEGER NOT NULL,\u000a\u0009CONSTRAINT FK_APUNTADOS_ACTIVIDADES_USUARIO FOREIGN KEY(ID_USUARIO) REFERENCES USUARIO(ID_USUARIO),\u000a\u0009CONSTRAINT FK_APUNTADOS_ACTIVIDADES_ACTIVIDAD FOREIGN KEY(ID_ACTIVIDAD) REFERENCES ACTIVIDADES(ID_ACTIVIDAD)\u000a)
DROP TABLE IF EXISTS APUNTADOS_ACTIVIDADES
DROP TABLE IF EXISTS NO_PRESENTADOS
DROP TABLE IF EXISTS ACTIVIDADES
DROP TABLE IF EXISTS PAGO
DROP TABLE IF EXISTS MENSUALIDADES
DROP TABLE IF EXISTS RESERVA
DROP TABLE IF EXISTS SALA
DROP TABLE IF EXISTS USUARIO
CREATE TABLE USUARIO(\u000a    ID_USUARIO INTEGER IDENTITY PRIMARY KEY,\u000a    DNI VARCHAR(9) NOT NULL UNIQUE,\u000a    NOMBRE VARCHAR(20) NOT NULL,\u000a    APELLIDOS VARCHAR(40) NOT NULL,\u000a    DIRECCION VARCHAR(40) NOT NULL,\u000a    EMAIL VARCHAR(40),\u000a    CIUDAD VARCHAR(20) NOT NULL,\u000a    PASSWORD VARCHAR(20) NOT NULL,\u000a    CUOTA DECIMAL(6,3) NOT NULL,\u000a    BAJA BOOLEAN NOT NULL,\u000a    FECHA_BAJA TIMESTAMP\u000a)
CREATE TABLE SALA(\u000a    ID_SALA INTEGER IDENTITY PRIMARY KEY,\u000a    DESCRIPCION VARCHAR(200) UNIQUE,\u000a    PRECIO DECIMAL(6,3) NOT NULL\u000a)
CREATE TABLE RESERVA(\u000a\u0009ID_RESERVA INTEGER IDENTITY PRIMARY KEY,\u000a\u0009HORA_INICIO TIMESTAMP NOT NULL,\u000a\u0009HORA_FIN TIMESTAMP NOT NULL,\u000a\u0009ID_USUARIO INTEGER NOT NULL,\u000a\u0009ID_SALA INTEGER NOT NULL,\u000a\u0009HORA_ENTRADA TIMESTAMP,\u000a\u0009HORA_SALIDA TIMESTAMP,\u000a\u0009ESTADO VARCHAR(15),\u000a\u0009CONSTRAINT FK_RESERVA_USUARIO FOREIGN KEY(ID_USUARIO) REFERENCES USUARIO(ID_USUARIO),\u000a\u0009CONSTRAINT FK_RESERVA_SALA FOREIGN KEY(ID_SALA) REFERENCES SALA(ID_SALA)\u000a)
CREATE TABLE PAGO (\u000a    ID_PAGO INTEGER IDENTITY PRIMARY KEY,\u000a    ID_RESERVA INTEGER NOT NULL,\u000a    PRECIO DECIMAL(6,3) NOT NULL,\u000a    CONTADO BOOLEAN NOT NULL,\u000a    PAGADO BOOLEAN NOT NULL,\u000a\u0009EN_CUOTA BOOLEAN DEFAULT FALSE,\u000a    CONSTRAINT FK_RESERVA_PAGO FOREIGN KEY (ID_RESERVA) REFERENCES RESERVA(ID_RESERVA),\u000a)
CREATE TABLE MENSUALIDADES (\u000a\u0009ID_USUARIO INTEGER,\u000a\u0009MES INTEGER,\u000a\u0009ANNO INTEGER,\u000a\u0009CUOTA DOUBLE,\u000a\u0009CONSTRAINT PK_ID_USUARIO_MES_ANNO PRIMARY KEY (ID_USUARIO, MES, ANNO),\u000a\u0009CONSTRAINT FK_ID_USUARIO FOREIGN KEY (ID_USUARIO) REFERENCES USUARIO(ID_USUARIO)\u000a)
CREATE TABLE ACTIVIDADES(\u000a\u0009ID_ACTIVIDAD INTEGER IDENTITY PRIMARY KEY,\u000a\u0009NOMBRE VARCHAR(40) NOT NULL,\u000a\u0009DESCRIPCION VARCHAR(200),\u000a\u0009ID_SALA INTEGER NOT NULL,\u000a\u0009NUMERO_PLAZAS INTEGER NOT NULL,\u000a\u0009CONSTRAINT FK_ID_SALA FOREIGN KEY (ID_SALA) REFERENCES SALA(ID_SALA)\u000a)
CREATE TABLE APUNTADOS_ACTIVIDADES(\u000a\u0009ID_USUARIO INTEGER NOT NULL,\u000a\u0009ID_ACTIVIDAD INTEGER NOT NULL,\u000a\u0009CONSTRAINT FK_APUNTADOS_ACTIVIDADES_USUARIO FOREIGN KEY(ID_USUARIO) REFERENCES USUARIO(ID_USUARIO),\u000a\u0009CONSTRAINT FK_APUNTADOS_ACTIVIDADES_ACTIVIDAD FOREIGN KEY(ID_ACTIVIDAD) REFERENCES ACTIVIDADES(ID_ACTIVIDAD)\u000a)
DROP TABLE IF EXISTS APUNTADOS_ACTIVIDADES
DROP TABLE IF EXISTS NO_PRESENTADOS
DROP TABLE IF EXISTS ACTIVIDADES
DROP TABLE IF EXISTS PAGO
DROP TABLE IF EXISTS MENSUALIDADES
DROP TABLE IF EXISTS RESERVA
DROP TABLE IF EXISTS SALA
DROP TABLE IF EXISTS USUARIO
CREATE TABLE USUARIO(\u000a    ID_USUARIO INTEGER IDENTITY PRIMARY KEY,\u000a    DNI VARCHAR(9) NOT NULL UNIQUE,\u000a    NOMBRE VARCHAR(20) NOT NULL,\u000a    APELLIDOS VARCHAR(40) NOT NULL,\u000a    DIRECCION VARCHAR(40) NOT NULL,\u000a    EMAIL VARCHAR(40),\u000a    CIUDAD VARCHAR(20) NOT NULL,\u000a    PASSWORD VARCHAR(20) NOT NULL,\u000a    CUOTA DECIMAL(6,3) NOT NULL,\u000a    BAJA BOOLEAN NOT NULL,\u000a    FECHA_BAJA TIMESTAMP\u000a)
CREATE TABLE SALA(\u000a    ID_SALA INTEGER IDENTITY PRIMARY KEY,\u000a    DESCRIPCION VARCHAR(200) UNIQUE,\u000a    PRECIO DECIMAL(6,3) NOT NULL\u000a)
CREATE TABLE RESERVA(\u000a\u0009ID_RESERVA INTEGER IDENTITY PRIMARY KEY,\u000a\u0009HORA_INICIO TIMESTAMP NOT NULL,\u000a\u0009HORA_FIN TIMESTAMP NOT NULL,\u000a\u0009ID_USUARIO INTEGER NOT NULL,\u000a\u0009ID_SALA INTEGER NOT NULL,\u000a\u0009HORA_ENTRADA TIMESTAMP,\u000a\u0009HORA_SALIDA TIMESTAMP,\u000a\u0009ESTADO VARCHAR(15),\u000a\u0009CONSTRAINT FK_RESERVA_USUARIO FOREIGN KEY(ID_USUARIO) REFERENCES USUARIO(ID_USUARIO),\u000a\u0009CONSTRAINT FK_RESERVA_SALA FOREIGN KEY(ID_SALA) REFERENCES SALA(ID_SALA)\u000a)
CREATE TABLE PAGO (\u000a    ID_PAGO INTEGER IDENTITY PRIMARY KEY,\u000a    ID_RESERVA INTEGER NOT NULL,\u000a    PRECIO DECIMAL(6,3) NOT NULL,\u000a    CONTADO BOOLEAN NOT NULL,\u000a    PAGADO BOOLEAN NOT NULL,\u000a\u0009EN_CUOTA BOOLEAN DEFAULT FALSE,\u000a    CONSTRAINT FK_RESERVA_PAGO FOREIGN KEY (ID_RESERVA) REFERENCES RESERVA(ID_RESERVA),\u000a)
CREATE TABLE MENSUALIDADES (\u000a\u0009ID_USUARIO INTEGER,\u000a\u0009MES INTEGER,\u000a\u0009ANNO INTEGER,\u000a\u0009CUOTA DOUBLE,\u000a\u0009CONSTRAINT PK_ID_USUARIO_MES_ANNO PRIMARY KEY (ID_USUARIO, MES, ANNO),\u000a\u0009CONSTRAINT FK_ID_USUARIO FOREIGN KEY (ID_USUARIO) REFERENCES USUARIO(ID_USUARIO)\u000a)
CREATE TABLE ACTIVIDADES(\u000a\u0009ID_ACTIVIDAD INTEGER IDENTITY PRIMARY KEY,\u000a\u0009NOMBRE VARCHAR(40) NOT NULL,\u000a\u0009DESCRIPCION VARCHAR(200),\u000a\u0009ID_SALA INTEGER NOT NULL,\u000a\u0009NUMERO_PLAZAS INTEGER NOT NULL,\u000a\u0009CONSTRAINT FK_ID_SALA FOREIGN KEY (ID_SALA) REFERENCES SALA(ID_SALA)\u000a)
CREATE TABLE APUNTADOS_ACTIVIDADES(\u000a\u0009ID_USUARIO INTEGER NOT NULL,\u000a\u0009ID_ACTIVIDAD INTEGER NOT NULL,\u000a\u0009CONSTRAINT FK_APUNTADOS_ACTIVIDADES_USUARIO FOREIGN KEY(ID_USUARIO) REFERENCES USUARIO(ID_USUARIO),\u000a\u0009CONSTRAINT FK_APUNTADOS_ACTIVIDADES_ACTIVIDAD FOREIGN KEY(ID_ACTIVIDAD) REFERENCES ACTIVIDADES(ID_ACTIVIDAD)\u000a)
DROP TABLE IF EXISTS APUNTADOS_ACTIVIDADES
DROP TABLE IF EXISTS NO_PRESENTADOS
DROP TABLE IF EXISTS ACTIVIDADES
DROP TABLE IF EXISTS PAGO
DROP TABLE IF EXISTS MENSUALIDADES
DROP TABLE IF EXISTS RESERVA
DROP TABLE IF EXISTS SALA
DROP TABLE IF EXISTS USUARIO
CREATE TABLE USUARIO(\u000a    ID_USUARIO INTEGER IDENTITY PRIMARY KEY,\u000a    DNI VARCHAR(9) NOT NULL UNIQUE,\u000a    NOMBRE VARCHAR(20) NOT NULL,\u000a    APELLIDOS VARCHAR(40) NOT NULL,\u000a    DIRECCION VARCHAR(40) NOT NULL,\u000a    EMAIL VARCHAR(40),\u000a    CIUDAD VARCHAR(20) NOT NULL,\u000a    PASSWORD VARCHAR(20) NOT NULL,\u000a    CUOTA DECIMAL(6,3) NOT NULL,\u000a    BAJA BOOLEAN NOT NULL,\u000a    FECHA_BAJA TIMESTAMP\u000a)
CREATE TABLE SALA(\u000a    ID_SALA INTEGER IDENTITY PRIMARY KEY,\u000a    DESCRIPCION VARCHAR(200) UNIQUE,\u000a    PRECIO DECIMAL(6,3) NOT NULL\u000a)
CREATE TABLE RESERVA(\u000a\u0009ID_RESERVA INTEGER IDENTITY PRIMARY KEY,\u000a\u0009HORA_INICIO TIMESTAMP NOT NULL,\u000a\u0009HORA_FIN TIMESTAMP NOT NULL,\u000a\u0009ID_USUARIO INTEGER NOT NULL,\u000a\u0009ID_SALA INTEGER NOT NULL,\u000a\u0009HORA_ENTRADA TIMESTAMP,\u000a\u0009HORA_SALIDA TIMESTAMP,\u000a\u0009ESTADO VARCHAR(15),\u000a\u0009CONSTRAINT FK_RESERVA_USUARIO FOREIGN KEY(ID_USUARIO) REFERENCES USUARIO(ID_USUARIO),\u000a\u0009CONSTRAINT FK_RESERVA_SALA FOREIGN KEY(ID_SALA) REFERENCES SALA(ID_SALA)\u000a)
CREATE TABLE PAGO (\u000a    ID_PAGO INTEGER IDENTITY PRIMARY KEY,\u000a    ID_RESERVA INTEGER NOT NULL,\u000a    PRECIO DECIMAL(6,3) NOT NULL,\u000a    CONTADO BOOLEAN NOT NULL,\u000a    PAGADO BOOLEAN NOT NULL,\u000a\u0009EN_CUOTA BOOLEAN DEFAULT FALSE,\u000a    CONSTRAINT FK_RESERVA_PAGO FOREIGN KEY (ID_RESERVA) REFERENCES RESERVA(ID_RESERVA),\u000a)
CREATE TABLE MENSUALIDADES (\u000a\u0009ID_USUARIO INTEGER,\u000a\u0009MES INTEGER,\u000a\u0009ANNO INTEGER,\u000a\u0009CUOTA DOUBLE,\u000a\u0009CONSTRAINT PK_ID_USUARIO_MES_ANNO PRIMARY KEY (ID_USUARIO, MES, ANNO),\u000a\u0009CONSTRAINT FK_ID_USUARIO FOREIGN KEY (ID_USUARIO) REFERENCES USUARIO(ID_USUARIO)\u000a)
CREATE TABLE ACTIVIDADES(\u000a\u0009ID_ACTIVIDAD INTEGER IDENTITY PRIMARY KEY,\u000a\u0009NOMBRE VARCHAR(40) NOT NULL,\u000a\u0009DESCRIPCION VARCHAR(200),\u000a\u0009ID_SALA INTEGER NOT NULL,\u000a\u0009NUMERO_PLAZAS INTEGER NOT NULL,\u000a\u0009CONSTRAINT FK_ID_SALA FOREIGN KEY (ID_SALA) REFERENCES SALA(ID_SALA)\u000a)
CREATE TABLE APUNTADOS_ACTIVIDADES(\u000a\u0009ID_USUARIO INTEGER NOT NULL,\u000a\u0009ID_ACTIVIDAD INTEGER NOT NULL,\u000a\u0009CONSTRAINT FK_APUNTADOS_ACTIVIDADES_USUARIO FOREIGN KEY(ID_USUARIO) REFERENCES USUARIO(ID_USUARIO),\u000a\u0009CONSTRAINT FK_APUNTADOS_ACTIVIDADES_ACTIVIDAD FOREIGN KEY(ID_ACTIVIDAD) REFERENCES ACTIVIDADES(ID_ACTIVIDAD)\u000a)
CREATE TABLE NO_PRESENTADOS(\u000a\u0009ID_USUARIO INTEGER NOT NULL,\u000a\u0009ID_ACTIVIDAD INTEGER NOT NULL,\u000a\u0009CONSTRAINT FK_NO_PRESENTADOS_USUARIO FOREIGN KEY(ID_USUARIO) REFERENCES USUARIO(ID_USUARIO),\u000a\u0009CONSTRAINT FK_NO_PRESENTADOS_ACTIVIDAD FOREIGN KEY(ID_ACTIVIDAD) REFERENCES ACTIVIDADES(ID_ACTIVIDAD),\u000a)
DROP TABLE IF EXISTS APUNTADOS_ACTIVIDADES
DROP TABLE IF EXISTS NO_PRESENTADOS
DROP TABLE IF EXISTS ACTIVIDADES
DROP TABLE IF EXISTS PAGO
DROP TABLE IF EXISTS MENSUALIDADES
DROP TABLE IF EXISTS RESERVA
DROP TABLE IF EXISTS SALA
DROP TABLE IF EXISTS USUARIO
CREATE TABLE USUARIO(\u000a    ID_USUARIO INTEGER IDENTITY PRIMARY KEY,\u000a    DNI VARCHAR(9) NOT NULL UNIQUE,\u000a    NOMBRE VARCHAR(20) NOT NULL,\u000a    APELLIDOS VARCHAR(40) NOT NULL,\u000a    DIRECCION VARCHAR(40) NOT NULL,\u000a    EMAIL VARCHAR(40),\u000a    CIUDAD VARCHAR(20) NOT NULL,\u000a    PASSWORD VARCHAR(20) NOT NULL,\u000a    CUOTA DECIMAL(6,3) NOT NULL,\u000a    BAJA BOOLEAN NOT NULL,\u000a    FECHA_BAJA TIMESTAMP\u000a)
CREATE TABLE SALA(\u000a    ID_SALA INTEGER IDENTITY PRIMARY KEY,\u000a    DESCRIPCION VARCHAR(200) UNIQUE,\u000a    PRECIO DECIMAL(6,3) NOT NULL\u000a)
CREATE TABLE RESERVA(\u000a\u0009ID_RESERVA INTEGER IDENTITY PRIMARY KEY,\u000a\u0009HORA_INICIO TIMESTAMP NOT NULL,\u000a\u0009HORA_FIN TIMESTAMP NOT NULL,\u000a\u0009ID_USUARIO INTEGER NOT NULL,\u000a\u0009ID_SALA INTEGER NOT NULL,\u000a\u0009HORA_ENTRADA TIMESTAMP,\u000a\u0009HORA_SALIDA TIMESTAMP,\u000a\u0009ESTADO VARCHAR(15),\u000a\u0009CONSTRAINT FK_RESERVA_USUARIO FOREIGN KEY(ID_USUARIO) REFERENCES USUARIO(ID_USUARIO),\u000a\u0009CONSTRAINT FK_RESERVA_SALA FOREIGN KEY(ID_SALA) REFERENCES SALA(ID_SALA)\u000a)
CREATE TABLE PAGO (\u000a    ID_PAGO INTEGER IDENTITY PRIMARY KEY,\u000a    ID_RESERVA INTEGER NOT NULL,\u000a    PRECIO DECIMAL(6,3) NOT NULL,\u000a    CONTADO BOOLEAN NOT NULL,\u000a    PAGADO BOOLEAN NOT NULL,\u000a\u0009EN_CUOTA BOOLEAN DEFAULT FALSE,\u000a    CONSTRAINT FK_RESERVA_PAGO FOREIGN KEY (ID_RESERVA) REFERENCES RESERVA(ID_RESERVA),\u000a)
CREATE TABLE MENSUALIDADES (\u000a\u0009ID_USUARIO INTEGER,\u000a\u0009MES INTEGER,\u000a\u0009ANNO INTEGER,\u000a\u0009CUOTA DOUBLE,\u000a\u0009CONSTRAINT PK_ID_USUARIO_MES_ANNO PRIMARY KEY (ID_USUARIO, MES, ANNO),\u000a\u0009CONSTRAINT FK_ID_USUARIO FOREIGN KEY (ID_USUARIO) REFERENCES USUARIO(ID_USUARIO)\u000a)
CREATE TABLE ACTIVIDADES(\u000a\u0009ID_ACTIVIDAD INTEGER IDENTITY PRIMARY KEY,\u000a\u0009NOMBRE VARCHAR(40) NOT NULL,\u000a\u0009DESCRIPCION VARCHAR(200),\u000a\u0009ID_SALA INTEGER NOT NULL,\u000a\u0009NUMERO_PLAZAS INTEGER NOT NULL,\u000a\u0009CONSTRAINT FK_ID_SALA FOREIGN KEY (ID_SALA) REFERENCES SALA(ID_SALA)\u000a)
CREATE TABLE APUNTADOS_ACTIVIDADES(\u000a\u0009ID_USUARIO INTEGER NOT NULL,\u000a\u0009ID_ACTIVIDAD INTEGER NOT NULL,\u000a\u0009CONSTRAINT FK_APUNTADOS_ACTIVIDADES_USUARIO FOREIGN KEY(ID_USUARIO) REFERENCES USUARIO(ID_USUARIO),\u000a\u0009CONSTRAINT FK_APUNTADOS_ACTIVIDADES_ACTIVIDAD FOREIGN KEY(ID_ACTIVIDAD) REFERENCES ACTIVIDADES(ID_ACTIVIDAD)\u000a)
CREATE TABLE NO_PRESENTADOS(\u000a\u0009ID_USUARIO INTEGER NOT NULL,\u000a\u0009ID_ACTIVIDAD INTEGER NOT NULL,\u000a\u0009CONSTRAINT FK_NO_PRESENTADOS_USUARIO FOREIGN KEY(ID_USUARIO) REFERENCES USUARIO(ID_USUARIO),\u000a\u0009CONSTRAINT FK_NO_PRESENTADOS_ACTIVIDAD FOREIGN KEY(ID_ACTIVIDAD) REFERENCES ACTIVIDADES(ID_ACTIVIDAD),\u000a)
DISCONNECT
