/*C28*/SET SCHEMA PUBLIC
DROP TABLE IF EXISTS NO_PRESENTADOS
DROP TABLE IF EXISTS APUNTADOS_ACTIVIDADES
DROP TABLE IF EXISTS MONITORES
DROP TABLE IF EXISTS NO_PRESENTADOS
DROP TABLE IF EXISTS APUNTADOS_ACTIVIDADES
DROP TABLE IF EXISTS MONITORES
DROP TABLE IF EXISTS NO_PRESENTADOS
DROP TABLE IF EXISTS APUNTADOS_ACTIVIDADES
DROP TABLE IF EXISTS PAGO
DROP TABLE IF EXISTS RESERVA
DROP TABLE IF EXISTS ACTIVIDADES\u000a
DROP TABLE IF EXISTS SALA
DROP TABLE IF EXISTS MONITORES
DROP TABLE IF EXISTS MENSUALIDADES
DROP TABLE IF EXISTS NO_PRESENTADOS
DROP TABLE IF EXISTS APUNTADOS_ACTIVIDADES
DROP TABLE IF EXISTS PAGO
DROP TABLE IF EXISTS RESERVA
DROP TABLE IF EXISTS ACTIVIDADES\u000a
DROP TABLE IF EXISTS SALA
DROP TABLE IF EXISTS USUARIO
CREATE TABLE USUARIO(\u000a    ID_USUARIO INTEGER IDENTITY PRIMARY KEY,\u000a    DNI VARCHAR(9) NOT NULL UNIQUE,\u000a    NOMBRE VARCHAR(20) NOT NULL,\u000a    APELLIDOS VARCHAR(40) NOT NULL,\u000a    DIRECCION VARCHAR(40) NOT NULL,\u000a    EMAIL VARCHAR(40),\u000a    CIUDAD VARCHAR(20) NOT NULL,\u000a    PASSWORD VARCHAR(20) NOT NULL,\u000a    CUOTA DECIMAL(6,3) NOT NULL,\u000a    BAJA BOOLEAN NOT NULL,\u000a    FECHA_BAJA TIMESTAMP\u000a)
CREATE TABLE SALA(\u000a    ID_SALA INTEGER IDENTITY PRIMARY KEY,\u000a    DESCRIPCION VARCHAR(200) UNIQUE,\u000a    PRECIO DECIMAL(6,3) NOT NULL\u000a)
DROP TABLE IF EXISTS MONITORES
DROP TABLE IF EXISTS MENSUALIDADES
DROP TABLE IF EXISTS NO_PRESENTADOS
DROP TABLE IF EXISTS APUNTADOS_ACTIVIDADES
DROP TABLE IF EXISTS PAGO
DROP TABLE IF EXISTS RESERVA
DROP TABLE IF EXISTS ACTIVIDADES\u000a
DROP TABLE IF EXISTS SALA
DROP TABLE IF EXISTS USUARIO
CREATE TABLE USUARIO(\u000a    ID_USUARIO INTEGER IDENTITY PRIMARY KEY,\u000a    DNI VARCHAR(9) NOT NULL UNIQUE,\u000a    NOMBRE VARCHAR(20) NOT NULL,\u000a    APELLIDOS VARCHAR(40) NOT NULL,\u000a    DIRECCION VARCHAR(40) NOT NULL,\u000a    EMAIL VARCHAR(40),\u000a    CIUDAD VARCHAR(20) NOT NULL,\u000a    PASSWORD VARCHAR(20) NOT NULL,\u000a    CUOTA DECIMAL(6,3) NOT NULL,\u000a    BAJA BOOLEAN NOT NULL,\u000a    FECHA_BAJA TIMESTAMP\u000a)
CREATE TABLE SALA(\u000a    ID_SALA INTEGER IDENTITY PRIMARY KEY,\u000a    DESCRIPCION VARCHAR(200) UNIQUE,\u000a    PRECIO DECIMAL(6,3) NOT NULL\u000a)
DROP TABLE IF EXISTS MONITORES
DROP TABLE IF EXISTS MENSUALIDADES
DROP TABLE IF EXISTS NO_PRESENTADOS
DROP TABLE IF EXISTS APUNTADOS_ACTIVIDADES
DROP TABLE IF EXISTS PAGO
DROP TABLE IF EXISTS RESERVA
DROP TABLE IF EXISTS ACTIVIDADES\u000a
DROP TABLE IF EXISTS SALA
DROP TABLE IF EXISTS USUARIO
CREATE TABLE USUARIO(\u000a    ID_USUARIO INTEGER IDENTITY PRIMARY KEY,\u000a    DNI VARCHAR(9) NOT NULL UNIQUE,\u000a    NOMBRE VARCHAR(20) NOT NULL,\u000a    APELLIDOS VARCHAR(40) NOT NULL,\u000a    DIRECCION VARCHAR(40) NOT NULL,\u000a    EMAIL VARCHAR(40),\u000a    CIUDAD VARCHAR(20) NOT NULL,\u000a    PASSWORD VARCHAR(20) NOT NULL,\u000a    CUOTA DECIMAL(6,3) NOT NULL,\u000a    BAJA BOOLEAN NOT NULL,\u000a    FECHA_BAJA TIMESTAMP\u000a)
CREATE TABLE SALA(\u000a    ID_SALA INTEGER IDENTITY PRIMARY KEY,\u000a    DESCRIPCION VARCHAR(200) UNIQUE,\u000a    PRECIO DECIMAL(6,3) NOT NULL\u000a)
DROP TABLE IF EXISTS MONITORES
DROP TABLE IF EXISTS MENSUALIDADES
DROP TABLE IF EXISTS NO_PRESENTADOS
DROP TABLE IF EXISTS APUNTADOS_ACTIVIDADES
DROP TABLE IF EXISTS PAGO
DROP TABLE IF EXISTS RESERVA
DROP TABLE IF EXISTS ACTIVIDADES\u000a
DROP TABLE IF EXISTS SALA
DROP TABLE IF EXISTS USUARIO
CREATE TABLE USUARIO(\u000a    ID_USUARIO INTEGER IDENTITY PRIMARY KEY,\u000a    DNI VARCHAR(9) NOT NULL UNIQUE,\u000a    NOMBRE VARCHAR(20) NOT NULL,\u000a    APELLIDOS VARCHAR(40) NOT NULL,\u000a    DIRECCION VARCHAR(40) NOT NULL,\u000a    EMAIL VARCHAR(40),\u000a    CIUDAD VARCHAR(20) NOT NULL,\u000a    PASSWORD VARCHAR(20) NOT NULL,\u000a    CUOTA DECIMAL(6,3) NOT NULL,\u000a    BAJA BOOLEAN NOT NULL,\u000a    FECHA_BAJA TIMESTAMP\u000a)
CREATE TABLE SALA(\u000a    ID_SALA INTEGER IDENTITY PRIMARY KEY,\u000a    DESCRIPCION VARCHAR(200) UNIQUE,\u000a    PRECIO DECIMAL(6,3) NOT NULL\u000a)
DROP TABLE IF EXISTS MONITORES
DROP TABLE IF EXISTS MENSUALIDADES
DROP TABLE IF EXISTS NO_PRESENTADOS
DROP TABLE IF EXISTS APUNTADOS_ACTIVIDADES
DROP TABLE IF EXISTS PAGO
DROP TABLE IF EXISTS RESERVA
DROP TABLE IF EXISTS ACTIVIDADES\u000a
DROP TABLE IF EXISTS SALA
DROP TABLE IF EXISTS USUARIO
CREATE TABLE USUARIO(\u000a    ID_USUARIO INTEGER IDENTITY PRIMARY KEY,\u000a    DNI VARCHAR(9) NOT NULL UNIQUE,\u000a    NOMBRE VARCHAR(20) NOT NULL,\u000a    APELLIDOS VARCHAR(40) NOT NULL,\u000a    DIRECCION VARCHAR(40) NOT NULL,\u000a    EMAIL VARCHAR(40),\u000a    CIUDAD VARCHAR(20) NOT NULL,\u000a    PASSWORD VARCHAR(20) NOT NULL,\u000a    CUOTA DECIMAL(6,3) NOT NULL,\u000a    BAJA BOOLEAN NOT NULL,\u000a    FECHA_BAJA TIMESTAMP\u000a)
CREATE TABLE SALA(\u000a    ID_SALA INTEGER IDENTITY PRIMARY KEY,\u000a    DESCRIPCION VARCHAR(200) UNIQUE,\u000a    PRECIO DECIMAL(6,3) NOT NULL\u000a)
CREATE TABLE MONITORES(\u000a    ID_MONITOR INTEGER IDENTITY PRIMARY KEY,\u000a    ID_USUARIO INTEGER NOT NULL,\u000a    CONSTRAINT PK_USUARIO_MONITOR FOREIGN KEY (ID_USUARIO) REFERENCES USUARIO(ID_USUARIO)\u000a)
CREATE TABLE ACTIVIDADES(\u000a    ID_ACTIVIDAD INTEGER IDENTITY PRIMARY KEY,\u000a    NOMBRE VARCHAR(40) NOT NULL UNIQUE,\u000a    DESCRIPCION VARCHAR(200),\u000a    NUMERO_PLAZAS INTEGER NOT NULL,\u000a    ID_MONITOR INTEGER NOT NULL,\u000a    CONSTRAINT FK_ACTIVIDADES_MONITOR FOREIGN KEY (ID_MONITOR) REFERENCES MONITORES(ID_MONITOR)\u000a )
CREATE TABLE APUNTADOS_ACTIVIDADES(\u000a    ID_USUARIO INTEGER NOT NULL,\u000a    ID_ACTIVIDAD INTEGER NOT NULL,\u000a    CONSTRAINT FK_APUNTADOS_ACTIVIDADES_USUARIO FOREIGN KEY(ID_USUARIO) REFERENCES USUARIO(ID_USUARIO),\u000a    CONSTRAINT FK_APUNTADOS_ACTIVIDADES_ACTIVIDAD FOREIGN KEY(ID_ACTIVIDAD) REFERENCES ACTIVIDADES(ID_ACTIVIDAD)\u000a )
CREATE TABLE NO_PRESENTADOS(\u000a    ID_USUARIO INTEGER NOT NULL,\u000a    ID_ACTIVIDAD INTEGER NOT NULL,\u000a    CONSTRAINT FK_NO_PRESENTADOS_USUARIO FOREIGN KEY(ID_USUARIO) REFERENCES USUARIO(ID_USUARIO),\u000a    CONSTRAINT FK_NO_PRESENTADOS_ACTIVIDAD FOREIGN KEY(ID_ACTIVIDAD) REFERENCES ACTIVIDADES(ID_ACTIVIDAD),\u000a )
CREATE TABLE RESERVA(\u000a    ID_RESERVA INTEGER IDENTITY PRIMARY KEY,\u000a    HORA_INICIO TIMESTAMP NOT NULL,\u000a    HORA_FIN TIMESTAMP NOT NULL,\u000a    ID_USUARIO INTEGER NOT NULL,\u000a    ID_SALA INTEGER NOT NULL,\u000a    HORA_ENTRADA TIMESTAMP,\u000a    HORA_SALIDA TIMESTAMP,\u000a    ESTADO VARCHAR(15),\u000a    ID_ACTIVIDAD INTEGER,\u000a    CONSTRAINT FK_RESERVA_USUARIO FOREIGN KEY(ID_USUARIO) REFERENCES USUARIO(ID_USUARIO),\u000a    CONSTRAINT FK_RESERVA_ACTIVIDAD FOREIGN KEY(ID_ACTIVIDAD) REFERENCES ACTIVIDADES(ID_ACTIVIDAD),\u000a    CONSTRAINT FK_RESERVA_SALA FOREIGN KEY(ID_SALA) REFERENCES SALA(ID_SALA)\u000a)
CREATE TABLE PAGO (\u000a    ID_PAGO INTEGER IDENTITY PRIMARY KEY,\u000a    ID_RESERVA INTEGER NOT NULL,\u000a    PRECIO DECIMAL(6,3) NOT NULL,\u000a    CONTADO BOOLEAN NOT NULL,\u000a    PAGADO BOOLEAN NOT NULL,\u000a    EN_CUOTA BOOLEAN DEFAULT FALSE,\u000a    CONSTRAINT FK_RESERVA_PAGO FOREIGN KEY (ID_RESERVA) REFERENCES RESERVA(ID_RESERVA),\u000a)
CREATE TABLE MENSUALIDADES (\u000a    ID_USUARIO INTEGER,\u000a    MES INTEGER,\u000a    ANNO INTEGER,\u000a    CUOTA DOUBLE,\u000a    CONSTRAINT PK_ID_USUARIO_MES_ANNO PRIMARY KEY (ID_USUARIO, MES, ANNO),\u000a    CONSTRAINT FK_ID_USUARIO_MENSUALIDAD FOREIGN KEY (ID_USUARIO) REFERENCES USUARIO(ID_USUARIO)\u000a)
INSERT INTO USUARIO VALUES(0,'00000000','ADMIN','ADMIN','ADMIN','','ADMIN','ADMIN',0.000,FALSE,NULL)
COMMIT
INSERT INTO USUARIO VALUES(1,'76454395G','Pedro','Arguelles','C/Comandante Janari','','Oviedo','1234',25.000,FALSE,NULL)
COMMIT
INSERT INTO USUARIO VALUES(2,'76434395A','Paco','Riesgo','C/Comandante Janari','','Oviedo','1234',25.000,FALSE,NULL)
COMMIT
INSERT INTO USUARIO VALUES(3,'76455695F','Saul','Garcia','C/Comandante Janari','','Oviedo','1234',25.000,TRUE,'2016-11-01 00:00:00.000000')
COMMIT
INSERT INTO USUARIO VALUES(4,'76432955H','Alfredo','Miravalles','C/Comandante Janari','','Oviedo','1234',25.000,TRUE,'2017-01-01 00:00:00.000000')
COMMIT
INSERT INTO USUARIO VALUES(5,'76458395Y','Martin','Diaz','C/Comandante Janari','','Oviedo','1234',25.000,FALSE,NULL)
COMMIT
INSERT INTO USUARIO VALUES(6,'76458885Z','David','Mu\u00f1iz','C/Comandante Janari','','Oviedo','1234',25.000,TRUE,'2016-10-01 00:00:00.000000')
COMMIT
INSERT INTO SALA VALUES(0,'Spinning',8.900)
COMMIT
INSERT INTO SALA VALUES(1,'Tenis 1',7.500)
COMMIT
INSERT INTO SALA VALUES(2,'Tenis 2',7.500)
COMMIT
INSERT INTO SALA VALUES(3,'Padel 1',8.000)
COMMIT
INSERT INTO SALA VALUES(4,'Padel 2',8.000)
COMMIT
INSERT INTO SALA VALUES(5,'Karate',15.000)
COMMIT
INSERT INTO SALA VALUES(6,'Boxeo',14.000)
COMMIT
INSERT INTO MONITORES VALUES(0,4)
COMMIT
INSERT INTO MONITORES VALUES(1,3)
COMMIT
/*C29*/SET SCHEMA PUBLIC
DISCONNECT
/*C30*/SET SCHEMA PUBLIC
DISCONNECT
/*C32*/SET SCHEMA PUBLIC
DISCONNECT
/*C33*/SET SCHEMA PUBLIC
DISCONNECT
/*C34*/SET SCHEMA PUBLIC
DISCONNECT
/*C35*/SET SCHEMA PUBLIC
DISCONNECT
/*C36*/SET SCHEMA PUBLIC
DISCONNECT
/*C38*/SET SCHEMA PUBLIC
DISCONNECT
/*C39*/SET SCHEMA PUBLIC
INSERT INTO ACTIVIDADES VALUES(0,'Prueba','fgdfgd',5,1)
COMMIT
INSERT INTO RESERVA VALUES(0,'2017-02-02 00:00:00.000000','2017-02-03 00:00:00.000000',0,5,NULL,NULL,NULL,0)
COMMIT
DISCONNECT
/*C31*/SET SCHEMA PUBLIC
DISCONNECT
/*C37*/SET SCHEMA PUBLIC
DISCONNECT
/*C40*/SET SCHEMA PUBLIC
DISCONNECT
/*C41*/SET SCHEMA PUBLIC
DISCONNECT
/*C42*/SET SCHEMA PUBLIC
DISCONNECT
/*C43*/SET SCHEMA PUBLIC
DISCONNECT
/*C44*/SET SCHEMA PUBLIC
DISCONNECT
/*C45*/SET SCHEMA PUBLIC
DISCONNECT
/*C46*/SET SCHEMA PUBLIC
DISCONNECT
/*C48*/SET SCHEMA PUBLIC
DISCONNECT
/*C49*/SET SCHEMA PUBLIC
DISCONNECT
